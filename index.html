<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elektronik Paylaşım - Mal Yağız Yasin</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#0f172a;
    color:white;
}
header{
    background:#1e293b;
    padding:15px;
    text-align:center;
}
h1{color:#38bdf8;}
#uploadBtn{
    position:fixed;
    bottom:20px;
    right:20px;
    width:60px;
    height:60px;
    border-radius:50%;
    font-size:30px;
    border:none;
    background:#38bdf8;
    cursor:pointer;
}
.post{
    background:#1e293b;
    margin:20px;
    padding:15px;
    border-radius:10px;
}
.post img{
    max-width:100%;
    border-radius:10px;
}
.comment{
    background:#0ea5e9;
    padding:5px;
    margin-top:5px;
    border-radius:5px;
    font-size:14px;
}
input,button{
    padding:5px;
    border-radius:5px;
    border:none;
}
</style>
</head>

<body>

<header>
<h1>Elektronik Paylaşım Platformu</h1>
<p>Projeni paylaş, yorum al!</p>
</header>

<div id="content"></div>

<input type="file" id="imageInput" accept="image/*" style="display:none">
<button id="uploadBtn">+</button>

<script>
let username = localStorage.getItem("username");

if(!username){
    username = prompt("İsmini gir:");
    if(username){
        localStorage.setItem("username", username);
    } else {
        username = "Anonim";
    }
}

let posts = JSON.parse(localStorage.getItem("posts")) || [];

function savePosts(){
    localStorage.setItem("posts", JSON.stringify(posts));
}

function renderPosts(){
    const content = document.getElementById("content");
    content.innerHTML = "";

    posts.forEach((post,index)=>{
        const div = document.createElement("div");
        div.className = "post";

        div.innerHTML = `
            <h3>${post.user}</h3>
            <img src="${post.image}">
            <div id="comments-${index}"></div>
            <input type="text" placeholder="Yorum yaz..." id="commentInput-${index}">
            <button onclick="addComment(${index})">Gönder</button>
        `;

        content.appendChild(div);

        const commentDiv = document.getElementById(`comments-${index}`);
        post.comments.forEach(c=>{
            const cDiv = document.createElement("div");
            cDiv.className = "comment";
            cDiv.innerText = c;
            commentDiv.appendChild(cDiv);
        });
    });
}

function addComment(index){
    const input = document.getElementById(`commentInput-${index}`);
    if(input.value.trim() !== ""){
        posts[index].comments.push(username + ": " + input.value);
        savePosts();
        renderPosts();
    }
}

document.getElementById("uploadBtn").onclick = ()=>{
    document.getElementById("imageInput").click();
}

document.getElementById("imageInput").onchange = function(){
    const file = this.files[0];
    const reader = new FileReader();

    reader.onload = function(e){
        posts.unshift({
            user: username,
            image: e.target.result,
            comments: []
        });
        savePosts();
        renderPosts();
    }

    reader.readAsDataURL(file);
}

renderPosts();
</script>

</body>
</html>